<html>
  <head>
  <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> -->
  <!-- <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"></script> -->
  <script
  src="https://code.jquery.com/jquery-3.5.1.js"
  integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
  crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet"/>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  <script>
      let players=""
      let playersArr=[]
      function startGame() {
        $("#savePlayers").prop('disabled', true)
        $("#players").prop('disabled',true)
        // $(".game").show()
        players = $("#players").val().replace(/ /g,'')
        players = players.replace(/[^a-zA-Z 0-9]+/g, '')
        for (var x = 0; x < players.length; x++){
          if (playersArr.indexOf(players[x]) === -1) {
            playersArr.push(players[x])
          }
        }
        $('#remainingLetters').text(playersArr.join(", "))
        runEffect()
      }
      function popLetter() {
        let magicNr = Math.floor((Math.random() * playersArr.length))
        $('#letter').text(playersArr[magicNr])
        playersArr.splice(magicNr,1)
        $('#remainingLetters').text(playersArr.join(", "))
        if (playersArr.length ===0) {
          $("#letterButton").prop('disabled', true)
          $("#endGameText").show()
          playersArr=[]
        }
      }
      function resetGame() {
        playersArr=[]
        players =""
        $("#players").val("")
        $('#letter').text("")
        $(".game").hide()
        $("#endGameText").hide()
        $("#savePlayers").prop('disabled', false)
        $("#letterButton").prop('disabled', false)
        $("#players").prop('disabled',false)
      }


      //Effects
      function runEffect() {
      // Most effect types need no options passed by default
      var options = {};
      // // some effects have required parameters
      // if ( selectedEffect === "scale" ) {
      //   options = { percent: 50 };
      // } else if ( selectedEffect === "transfer" ) {
      //   options = { to: "#button", className: "ui-effects-transfer" };
      // } else if ( selectedEffect === "size" ) {
      //   options = { to: { width: 200, height: 60 } };
      // }
 
      // Run the effect
      $( ".game" ).effect( 'slide', options, 500, callbackSlide );
    };
 
      // Callback function to bring a hidden box back
      function callbackSlide() {
        setTimeout(function() {
          $( ".game" ).removeAttr( "style" ).hide().fadeIn();
        }, 1000 );
      };
  
      // Set effect from select menu value
      $( "#savePlayers" ).on( "click", function() {
        runEffect();
        return false;
      });
    </script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <style>
      .welcome { margin-top: 5%}
      .game { display: none; margin: 0 auto; width: 50%;}
      #endGameText { display: none;}
      #savePlayers {margin-top: 10px}
      #letter{ font-size: 90px; }
      .game-ended{
        font-size: large;
        color:red;
      }
    </style>
  </head>
  <title>Bingo Familiar </title>
  <body class="container">
  <div class="text-center"> 
    <img src="http://www.piaget.com.ar/img/logo-jardin.png"/>
    <h1>Â¡Bingo de Letras!</h1>
      <div class="form-group text-left">
        <label for="players">Ingrese participantes separdos por espacio</label>
        <textarea class="form-control" rows="5" id="players"></textarea>
      </div>
      <div class="form-group row-1 text-left">
        <button id="savePlayers" onclick="startGame()" class="btn btn-primary"> 
          Guardar Participantes
        </button>
      </div>
      <div class="form-group row-1 text-left">
        
      </div>
  </div>

  <div class="game card">
    <div class="row-1 text-left">
      <span>Letras que faltan salir:</span><br>
      <p id="remainingLetters"></p>
    </div>
    <div class="row-1 text-left">
      <span id="letter"></span>
    </div>
    <div class="row-1 text-left">
      <h1 id="endGameText">
        Termino!
      </h1>
    </div>
    <div class="row-1 text-left">
      <button onClick="popLetter()" id="letterButton" class="btn btn-primary">Sacar Letra</button>
      <button id="resetGame" onClick="resetGame()" class="btn btn-danger"> 
        Empezar de nuevo 
      </button>
    </div>
  </div>
  
</body>

</html>